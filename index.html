<!DOCTYPE html>
  <html>
  <body>
  <title>Hole in the Wall simulator</title>
  <meta name = "description" content = "This website simulates hole in the wall. What did you really expect?">
  <p id = "title" style = "color:black;">Hole in the wall simulator</p>
  <span id = "subtitle" style = "color:black;">by adjective_n0un with a lot of help from </span>
  <a href="https://brookeafk.com" target = "_blank">BrookeAFK</a>
  
  <p id = "separator0" >ㅤ</p>
  
  <span id = "1" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(0)">ㅤ</span>
  <span id = "2" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(1)">ㅤ</span>
  <span id = "3" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(2)">ㅤ</span>
  <span id = "4" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(3)">ㅤ</span>
  <span id = "5" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(4)">ㅤ</span>
  <span id = "6" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(5)">ㅤ</span>
  <span id = "7" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(6)">ㅤ</span>
  <p id = "separator1" style = "font-size: 37.5%;">ㅤ</p>
  
  <span id = "8" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(7)">ㅤ</span>
  <span id = "9" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(8)">ㅤ</span>
  <span id = "10" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(9)">ㅤ</span>
  <span id = "11" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(10)">ㅤ</span>
  <span id = "12" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(11)">ㅤ</span>
  <span id = "13" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(12)">ㅤ</span>
  <span id = "14" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(13)">ㅤ</span>
  <span id = "score" style = "padding: 10px; text-align: center;"> Score: 0 </span>
  <p id = "separator2" style = "font-size: 37.5%;">ㅤ</p>

  
  
  <span id = "15" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(14)">ㅤ</span>
  <span id = "16" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(15)">ㅤ</span>
  <span id = "17" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(16)">ㅤ</span>
  <span id = "18" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(17)">ㅤ</span>
  <span id = "19" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(18)">ㅤ</span>
  <span id = "20" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(19)">ㅤ</span>
  <span id = "21" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(20)">ㅤ</span>
  <span id = "time" style = "padding: 10px; text-align:center;"> Time: 120s </span>
  <p id = "separator3" style = "font-size: 37.5%;">ㅤ</p>
  
  <span id = "22" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(21)">ㅤ</span>
  <span id = "23" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(22)">ㅤ</span>
  <span id = "24" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(23)">ㅤ</span>
  <span id = "25" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(24)">ㅤ</span>
  <span id = "26" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(25)">ㅤ</span>
  <span id = "27" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(26)">ㅤ</span>
  <span id = "28" style = "padding: 10px; background-color: #808080; text-align:center;" onclick = "dothing(27)">ㅤ</span>
  <p id = "separator4">ㅤ</p>
  <span id = "check" style = "padding:10px; background-color:#00ff00; text-color:#008000; text-align:center;" onclick = "comparison()">✓</span>
  <span id = "filler1" style = "padding:10px; background-color:#FFFFFF; text-align:center;">ㅤ</span>
  <span id = "filler2" style = "padding:10px; background-color:#FFFFFF; text-align:center;">ㅤ</span>
  <span id = "filler3" style = "padding:10px; background-color:#FFFFFF; text-align:center;">ㅤ</span>
  <span id = "filler4" style = "padding:10px; background-color:#FFFFFF; text-align:center;">ㅤ</span>
  <span id = "filler5" style = "padding:10px; background-color:#FFFFFF; text-align:center;">ㅤ</span>
  <span id = "check" style = "padding:10px; background-color:#00ff00; text-color:#008000; text-align:center;" onclick = "comparison()">✓</span>
  <p id = "separator4">ㅤ</p>




  <span id = "a1" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a2" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a3" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a4" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a5" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a6" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a7" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <p id = "separator5" style = "font-size: 37.5%;">ㅤ</p>
  
  <span id = "a8" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a9" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a10" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a11" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a12" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a13" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a14" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <p id = "separator6" style = "font-size: 37.5%;">ㅤ</p>
  
  <span id = "a15" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a16" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a17" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a18" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a19" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a20" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a21" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "highscore" style = "padding:10px; text-align:center:"> High Score: Loading... </span>
  <p id = "separator7" style = "font-size: 37.5%;">ㅤ</p>
  
  <span id = "a22" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a23" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a24" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a25" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a26" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a27" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <span id = "a28" style = "padding: 10px; background-color: #808080; text-align:center;">ㅤ</span>
  <p id = "separator8" style = "font-size: 100%;">ㅤ</p>

  <span id = "reset" style = "padding:10px; background-color: #FF0000; text-align:center:" onclick = "resetfull()">⟳</span>
  <p id = "instructions0" style = "padding:10px;">ㅤ</p>
  <p id = "instructions1" style = "padding:10px;">Guide: </p>
  <p id = "instructions2" style = "padding:10px;">Fill the holes in the lower wall by placing blocks in the upper wall.</p>
  <p id = "instructions3" style = "padding:10px;">Blocks can only be placed in the upper wall if they are adjacent to an edge or another block.</p>
  <p id = "instructions4" style = "padding:10px;">Click either green button to begin.</p>
  <p id = "instructions5" style = "padding:10px;">After filling in the wall, click either green button again to finish the round.</p>
  <p id = "instructions6" style = "padding:10px;">Click the red button to reset.</p>
  <p id = "instructions6" style = "padding:10px;">Every round, gain 1 point per block placed correctly, but lose one for every block placed incorrectly.</p>
  <p id = "instructions6" style = "padding:10px;">Good luck!</p>
  
  </body>
  
  
  <script>
  //set backend array to all inactive 
  var activearray = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
  //if this is your first time, create a localstorage
  if (localStorage.getItem('high_score') === null){
    localStorage.setItem('high_score', 0);
    document.getElementById("highscore").innerText = (" High score: " + 0);
  } else {
    document.getElementById("highscore").innerText = (" High score: " + localStorage.getItem('high_score'));
  }
  //changes active state of a block
  function dothing(num) {
    
    var actionperformed = false
    if (isEdge(num) || activearray[num - 7] == 1 || activearray[num + 7] == 1 || activearray[num - 1] == 1 || activearray[num + 1] == 1) {
      
      
      if (activearray[num] == 0){
        document.getElementById(num + 1).style.backgroundColor = "#000000"
        activearray[num] = 1
        actionperformed = true;
        console.log("placing block at location " + (num + 1))
      }
      
    }
    if (activearray[num] == 1 && actionperformed == false){
      document.getElementById(num + 1).style.backgroundColor = "#808080"
      activearray[num] = 0
      console.log("broke block at location " + (num + 1))
    }
    
    
  }
    //returns whether or not a block is on the edge
  function isEdge(num){
    var edgeblocks = [1, 2, 3, 4, 5, 6, 7, 8, 14, 15, 21, 22, 23, 24, 25, 26, 27, 28]
    if (edgeblocks.includes(num + 1))
      return true
  }
    //set the round number
  var level = 1;
  
  
  //set template array active state to all inactive
  var templateblocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
  //generate a new template array
  function generategrid(){
    
    //next level
    level ++;
    //set all grey
    for (var i = 0; i < 28; i++){
      document.getElementById("a" + (i + 1)).style.backgroundColor = "#808080"
    }
    //required blocks in each level
    var wallarray = [3, 3, 3, 4, 4, 5, 5, 6, 6, 7, 8]
    //always 8 after r11
    if (level < 11)
      holes = wallarray[level];
    else 
      holes = 8;
    //set the holes
    for (var i = 0; i < holes; i++){
      //top row rule
      if (level == 2){
        var replace = Math.floor(28 * Math.random())
      } else {
        var replace = Math.floor(21 * Math.random() + 7)
      }
      
      if (templateblocks[replace] == 1){
        i--;
      } else {
        templateblocks[replace] = 1;
      }
    }
    //set the required blocks to white
    for (var i = 0; i < 28; i++){
      if (templateblocks[i] == 1){
        document.getElementById("a" + (i + 1)).style.backgroundColor = "#FFFFFF"
      }
    }
    console.log("Generated new grid")
    
  }
  
  var score = 0;
  var started = false;
  var timer = 120;
  var timeinterval = 0;
  
  var highscore = 0;
  var music = new Audio("voting.mp3");
  
  //checks how many blocks you got right and returns score accordingly, then calls generategrid() again if there is time left
  function comparison(){
    var scoretoadd = 0;
    //start timer!
    if (started == false) {
      started = true;
      timeinterval = setInterval(time, 1000);
      music.play();
    }
    if (timer > 0) {
      //color the blocks depending on whether or not they are correct, then add or subtract score
      for (var i = 0; i < 28; i++){
        if (activearray[i] == 1 && templateblocks[i] == 1){
          document.getElementById(i + 1).style.backgroundColor = "#00FF00"
          scoretoadd++;
        }
        if (activearray[i] == 1 && templateblocks[i] == 0){
          document.getElementById(i + 1).style.backgroundColor = "#FF0000"
          scoretoadd--;
        }
        if (activearray[i] == 0 && templateblocks[i] == 1){
          document.getElementById(i + 1).style.backgroundColor = "#FFFF00"
        }
      }
      //can't have negative score for round
      if (scoretoadd < 0)
        scoretoadd = 0;
      score += scoretoadd;
      document.getElementById("score").innerText = (" Score: " + score)
      console.log("You gained " + scoretoadd + " points this round.")
      //reset grids and generate new one after 750 ms
      if (level > 1)
        setTimeout(reset, 750)
      //instant reset the first time
      else
        reset();
      //when time runs out, full reset the game
    } else {
      resetfull();
    }
  }
    //reset grids and generate new one
  function reset(){
    for (var i = 0; i < 28; i++){
      document.getElementById(i + 1).style.backgroundColor = "#808080"
    }
    templateblocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    activearray = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    generategrid()
  }
  //timer
  function time(){
    if (timer > 0) {
      timer -= 1;
      document.getElementById("time").innerText = (" Time: " + timer + "s");
    }
    //when time runs out, instantly check
    if (timer < 1) {
      document.getElementById("time").innerText = (" Time's up! ");
      clearInterval(timeinterval);
      var scoretoadd = 0;
      for (var i = 0; i < 28; i++){
      if (activearray[i] == 1 && templateblocks[i] == 1){
        document.getElementById(i + 1).style.backgroundColor = "#00FF00"
        scoretoadd++;
      }
      if (activearray[i] == 1 && templateblocks[i] == 0){
        document.getElementById(i + 1).style.backgroundColor = "#FF0000"
        scoretoadd--;
      }
      if (activearray[i] == 0 && templateblocks[i] == 1){
        document.getElementById(i + 1).style.backgroundColor = "#FFFF00"
        
      }
    }
    if (scoretoadd < 0)
      scoretoadd = 0;
    score += scoretoadd;
    document.getElementById("score").innerText = (" Score: " + score)
    console.log("You gained " + scoretoadd + " points this round.")
      //highscore set
      if (score > highscore){
        highscore = score;
        localStorage.setItem('high_score', highscore);
        document.getElementById("highscore").innerText = (" High score: " + highscore);
        console.log("Acknowledged new highscore")
      }
      music.pause();
    }
    
    
  }
    //full reset
  function resetfull() {
    clearInterval(timeinterval);
    timer = 120;
    document.getElementById("time").innerText = (" Time: " + timer + "s");
    for (var i = 0; i < 28; i++){
      document.getElementById(i + 1).style.backgroundColor = "#808080"
      document.getElementById("a" + (i + 1)).style.backgroundColor = "#808080"
    }
    score = 0;
    document.getElementById("score").innerText = ("Score: " + score)
    templateblocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    activearray = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
    level = 1;
    music.pause();
    music.currentTime = 0;
    started = false;
    console.log("Reset everything");
  }

  
  
  
  
  </script>
  
  

  <html>

